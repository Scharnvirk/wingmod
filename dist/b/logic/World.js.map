{"version":3,"sources":["../../../src/logic/World.js"],"names":[],"mappings":";;AAAA,SAAS,SAAS,CAAC,MAAM,EAAC;AACtB,MAAE,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;;AAEhC,QAAI,CAAC,aAAa,GAAG,IAAI,YAAY,CAAC,KAAK,CAAC,CAAC;;AAE7C,UAAM,GAAG,MAAM,IAAI,EAAE,CAAC;AACtB,QAAI,CAAC,OAAO,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACtB,QAAI,CAAC,WAAW,GAAG,KAAK,CAAC;;AAEzB,UAAM,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;CAC/B;;AAED,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC;;;;;;;;;;;;;;;;;;;AAAC,AAmB3B,SAAS,CAAC,SAAS,CAAC,cAAc,GAAG,YAAU;AAC3C,QAAI,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC;AACvC,SAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAG,EAAC;AACxC,YAAI,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AAC1B,qBAAa,CAAC,CAAC,GAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;AACpC,qBAAa,CAAC,CAAC,GAAC,CAAC,GAAC,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AACpC,qBAAa,CAAC,CAAC,GAAC,CAAC,GAAC,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AACxC,qBAAa,CAAC,CAAC,GAAC,CAAC,GAAC,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AACxC,qBAAa,CAAC,CAAC,GAAC,CAAC,GAAC,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;KACrC;;AAED,WAAO;AACH,cAAM,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM;AAC1B,qBAAa,EAAE,IAAI,CAAC,aAAa;KACpC,CAAC;CACL,CAAC","file":"World.js","sourcesContent":["function GameWorld(config){\r\n    p2.World.apply(this, arguments);\r\n\r\n    this.transferArray = new Float32Array(20000);\r\n\r\n    config = config || {};\r\n    this.gravity = [0, 0];\r\n    this.islandSplit = false;\r\n\r\n    Object.assign(this, config);\r\n}\r\n\r\nGameWorld.extend(p2.World);\r\n\r\n// GameWorld.prototype.makeUpdateData = function(){\r\n//     var updateData = [];\r\n//     this.bodies.forEach(function(body){\r\n//         updateData.push([body.storageId, body.classId, body.position[0], body.position[1], body.angle]);\r\n//     });\r\n//     return updateData;\r\n// };\r\n\r\n// GameWorld.prototype.makeUpdateData = function(){\r\n//     var rand = Utils.rand(1,100);\r\n//     for(let i = 0; i < 50000; i++){\r\n//         this.testArray[i] = i*rand+3;\r\n//     }\r\n//     return this.testArray;\r\n// };\r\n\r\n//format: [body.storageId, body.classId, body.position[0], body.position[1], body.angle]\r\nGameWorld.prototype.makeUpdateData = function(){\r\n    var transferArray = this.transferArray;\r\n    for(let i = 0; i < this.bodies.length; i ++){\r\n        let body = this.bodies[i];\r\n        transferArray[i*5] = body.storageId;\r\n        transferArray[i*5+1] = body.classId;\r\n        transferArray[i*5+2] = body.position[0];\r\n        transferArray[i*5+3] = body.position[1];\r\n        transferArray[i*5+4] = body.angle;\r\n    }\r\n\r\n    return {\r\n        length: this.bodies.length,\r\n        transferArray: this.transferArray\r\n    };\r\n};\r\n"]}