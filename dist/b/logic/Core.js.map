{"version":3,"sources":["../../../src/logic/Core.js"],"names":[],"mappings":";;AAAA,SAAS,IAAI,CAAC,MAAM,EAAC;;;AACjB,QAAI,CAAC,KAAK,GAAG,IAAI,SAAS,EAAE,CAAC;AAC7B,QAAI,CAAC,YAAY,GAAG,IAAI,YAAY,CAAC,EAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,EAAC,CAAC,CAAC;AACtE,QAAI,CAAC,SAAS,GAAG,IAAI,SAAS,CAAC,MAAM,CAAC,CAAC;AACvC,QAAI,CAAC,KAAK,GAAG,IAAI,SAAS,CAAC,EAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,YAAY,EAAE,IAAI,CAAC,YAAY,EAAC,CAAC,CAAC;AACjF,QAAI,CAAC,aAAa,EAAE,CAAC;AACrB,QAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC;AACvB,QAAI,CAAC,UAAU,GAAG,CAAC,CAAC;;AAEpB,eAAW,CAAC,YAAI;;AAEZ,cAAK,UAAU,GAAG,CAAC,CAAC;KACvB,EAAE,IAAI,CAAC,CAAC;CACZ;;AAED,IAAI,CAAC,SAAS,CAAC,WAAW,GAAG,YAAU;AACnC,WAAO,IAAI,EAAE,CAAC,KAAK,CAAC;AAChB,eAAO,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;AACf,mBAAW,EAAE,KAAK;KACrB,CAAC,CAAC;CACN,CAAC;;AAEF,IAAI,CAAC,SAAS,CAAC,gBAAgB,GAAG,YAAU;AACxC,QAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAC,EAAE,CAAC,CAAC;AACtB,QAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;AACpD,QAAI,CAAC,SAAS,CAAC,WAAW,CAAC,cAAc,EAAE,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC,CAAC;AACxE,QAAI,CAAC,UAAU,EAAE,CAAC;CACrB,CAAC;;AAEF,IAAI,CAAC,SAAS,CAAC,aAAa,GAAG,YAAU;AACrC,QAAI,SAAS,GAAG,IAAI,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;AAC3C,aAAS,CAAC,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AAChD,aAAS,CAAC,KAAK,EAAE,CAAC;CACrB,CAAC","file":"Core.js","sourcesContent":["function Core(worker){\r\n    this.world = new GameWorld();\r\n    this.actorManager = new ActorManager({world: this.world, core: this});\r\n    this.renderBus = new RenderBus(worker);\r\n    this.scene = new GameScene({world: this.world, actorManager: this.actorManager});\r\n    this.startGameLoop();\r\n    this.scene.fillScene();\r\n    this.logicTicks = 0;\r\n\r\n    setInterval(()=>{\r\n        //console.log('logicTicks: ', this.logicTicks);\r\n        this.logicTicks = 0;\r\n    }, 1000);\r\n}\r\n\r\nCore.prototype.createWorld = function(){\r\n    return new p2.World({\r\n        gravity: [1, 0],\r\n        islandSplit: false\r\n    });\r\n};\r\n\r\nCore.prototype.processGameLogic = function(){\r\n    this.world.step(1/30);\r\n    this.actorManager.update(this.renderBus.inputState);\r\n    this.renderBus.postMessage('updateActors', this.world.makeUpdateData());\r\n    this.logicTicks++;\r\n};\r\n\r\nCore.prototype.startGameLoop = function(){\r\n    var logicLoop = new THREEx.PhysicsLoop(30);\r\n    logicLoop.add(this.processGameLogic.bind(this));\r\n    logicLoop.start();\r\n};\r\n"]}