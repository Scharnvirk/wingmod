{"version":3,"sources":["../../../src/renderer/ControlsHandler.js"],"names":[],"mappings":";;AAAA,SAAS,eAAe,CAAC,MAAM,EAAC;AAC5B,QAAG,CAAC,MAAM,CAAC,aAAa,EAAE,MAAM,IAAI,KAAK,CAAC,6CAA6C,CAAC,CAAC;AACzF,QAAG,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,IAAI,KAAK,CAAC,yCAAyC,CAAC,CAAC;;AAEhF,UAAM,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;;AAE5B,QAAI,CAAC,aAAa,GAAG,MAAM,CAAC,aAAa,CAAC;AAC1C,QAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC;AAChC,QAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AACxB,QAAI,CAAC,UAAU,GAAI,EAAE,CAAC;CACzB;;AAED,eAAe,CAAC,SAAS,CAAC,MAAM,GAAG,YAAU;AACzC,UAAM,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;AACnD,UAAM,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;;AAE9D,QAAI,OAAO,GAAG,KAAK,CAAC;;AAEpB,SAAK,IAAI,GAAG,IAAI,IAAI,CAAC,UAAU,EAAC;AAC5B,YAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,EAAC;AAC/C,mBAAO,GAAG,IAAI,CAAC;SAClB;KACJ;;AAED,QAAG,OAAO,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC;CACjC,CAAC;;AAEF,eAAe,CAAC,SAAS,CAAC,UAAU,GAAG,YAAU;AAC7C,QAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;CAC5D,CAAC","file":"ControlsHandler.js","sourcesContent":["function ControlsHandler(config){\r\n    if(!config.inputListener) throw new Error('No inputListener specified for the handler!');\r\n    if(!config.logicBus) throw new Error('No logic bus specified for the handler!');\r\n\r\n    Object.assign(this, config);\r\n\r\n    this.inputListener = config.inputListener;\r\n    this.logicBus = config.logicBus;\r\n    this.oldInputState = {};\r\n    this.inputState =  {};\r\n}\r\n\r\nControlsHandler.prototype.update = function(){\r\n    Object.assign(this.oldInputState, this.inputState);\r\n    Object.assign(this.inputState, this.inputListener.inputState);\r\n\r\n    var changed = false;\r\n\r\n    for (let key in this.inputState){\r\n        if(this.inputState[key] != this.oldInputState[key]){\r\n            changed = true;\r\n        }\r\n    }\r\n\r\n    if(changed) this.sendUpdate();\r\n};\r\n\r\nControlsHandler.prototype.sendUpdate = function(){\r\n    this.logicBus.postMessage('inputState', this.inputState);\r\n};\r\n"]}