{"version":3,"sources":["../../../../src/renderer/scene/GameScene.js"],"names":[],"mappings":"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","file":"GameScene.js","sourcesContent":["class GameScene {\n    constructor(config) {\n        Object.assign(this, config);\n        this.lightCounter = 0;\n    }\n\n    makeWalls () {\n        var walls = [];\n        var wall;\n\n        var material = new THREE.MeshLambertMaterial({\n            color: 0xffffff\n        });\n\n        var wallGeometry = new THREE.BoxGeometry(10,100,10);\n\n        for(var i = 0; i < 100; i++){\n            wall = new THREE.Mesh(wallGeometry,material);\n            wall.position.x = Utils.rand(-300,300);\n            wall.position.y = Utils.rand(-300,300);\n            wall.position.z = Utils.rand(0,5);\n            wall.rotateZ(Utils.degToRad(Utils.rand(0,360)));\n            walls.push(wall);\n        }\n\n        var combine = new THREE.Geometry();\n\n        walls.forEach((w) => {\n            w.updateMatrix();\n            combine.merge(w.geometry, w.matrix);\n        });\n\n        return new THREE.Mesh(combine, material);\n    }\n\n    make() {\n\n        var combine = new THREE.Geometry();\n            var geometry = new THREE.PlaneGeometry(1000, 1000, 100, 100);\n            var material = new THREE.MeshLambertMaterial({ color: 0xffffff });\n            var floor = new THREE.Mesh(geometry, material);\n\n        floor.updateMatrix();\n        combine.merge(floor.geometry, floor.matrix);\n\n        var walls = this.makeWalls();\n        combine.merge(walls.geometry, walls.matrix);\n        var combinedObject = new THREE.Mesh(combine, material);\n        combinedObject.matrixAutoUpdate = false;\n        combinedObject.updateMatrix();\n        this.scene.add(combinedObject);\n\n        //helps if due to some error the scene doesn't render properly,\n        //particularly a case when lights go off\n        this.emergencyLight = new THREE.PointLight( 0x880000, 1, 200 );\n        this.emergencyLight.position.set( 0, 0, 50 );\n        this.scene.add( this.emergencyLight );\n\n        for (let i = 0; i < 15; i++){\n            let l =  new THREE.PointLight( 0xffffff, 1, 1 );\n            l.position.set(Utils.rand(-200,200), Utils.rand(-200,200), 20);\n            this.scene.add(l);\n        }\n    }\n\n    update(){}\n}\n"]}